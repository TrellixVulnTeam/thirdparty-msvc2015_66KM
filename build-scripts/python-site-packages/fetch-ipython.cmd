@setlocal enableextensions
::
:: Use pip to install IPython plus all of the 
:: notebook dependencies
::
@echo Setting up IPython and dependencies

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Setup environment. Important to ensure correct detection of environment
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
@call %~dp0..\cmds\common-setup.cmd
@set PYTHON_EXTRAS_DIR=%~dp0..\extras\python

::@call %PYTHON_INSTALL_PREFIX%\Scripts\pip.cmd install -U IPython[notebook]
::@call %PYTHON_INSTALL_PREFIX%\Scripts\pip.cmd install -U qtconsole

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Post-process
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Remove non-relocatable IPython .exe launchers and generate handwritten ones
set WRITE_LAUNCHER=%PYTHON_EXTRAS_DIR%\write-launcher-script.py
set PYTHON_SITE_PACKAGES=%PYTHON_INSTALL_PREFIX%\Lib\site-packages
%PYTHON_INSTALL_PREFIX%\python.exe %WRITE_LAUNCHER% --rm_exe %PYTHON_SITE_PACKAGES%\jupyter_core-4.4.0.dist-info\entry_points.txt
%PYTHON_INSTALL_PREFIX%\python.exe %WRITE_LAUNCHER% --rm_exe %PYTHON_SITE_PACKAGES%\jupyter_client-5.2.4.dist-info\entry_points.txt
%PYTHON_INSTALL_PREFIX%\python.exe %WRITE_LAUNCHER% --rm_exe %PYTHON_SITE_PACKAGES%\ipython-5.8.0.dist-info\entry_points.txt
%PYTHON_INSTALL_PREFIX%\python.exe %WRITE_LAUNCHER% --rm_exe %PYTHON_SITE_PACKAGES%\jsonschema-2.5.1.dist-info\entry_points.txt
%PYTHON_INSTALL_PREFIX%\python.exe %WRITE_LAUNCHER% --rm_exe %PYTHON_SITE_PACKAGES%\nbconvert-5.4.1.dist-info\entry_points.txt
%PYTHON_INSTALL_PREFIX%\python.exe %WRITE_LAUNCHER% --rm_exe %PYTHON_SITE_PACKAGES%\nbformat-4.4.0.dist-info\entry_points.txt
%PYTHON_INSTALL_PREFIX%\python.exe %WRITE_LAUNCHER% --rm_exe %PYTHON_SITE_PACKAGES%\notebook-5.7.4.dist-info\entry_points.txt
%PYTHON_INSTALL_PREFIX%\python.exe %WRITE_LAUNCHER% --rm_exe %PYTHON_SITE_PACKAGES%\qtconsole-4.4.3.dist-info\entry_points.txt

::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Finalize
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
@call try-pause.cmd
goto:eof